import{r as v,J as b,K as x,i as y,c as A,f as a,b as t,t as S,H as F,B as o,C as c,o as I}from"./index-BeAjqFi9.js";import{_ as $,a as E,b as L}from"./Footer-PcG7ZhFT.js";import{_ as B,u as j}from"./fileupload-B7aLR_UT.js";import{c as q,b as M,a as n,u as k}from"./index.esm-BZQsd48H.js";import{f as z,u as V}from"./artists-DEZFVxSL.js";import"./index-BRsckznO.js";import"./default-avatar-icon-DEm47801.js";import"./auth-BOsZdVNJ.js";import"./relativeTime-CHpSgnr3.js";import"./config-aeT5C0xW.js";const C={class:"flex overflow-hidden bg-white pt-16"},D={id:"main-content",class:"h-full w-full bg-gray-50 relative overflow-y-auto lg:ml-64"},K={class:"w-full flex items-center justify-center p-2"},N={class:"container max-w-6xl"},O={class:"bg-white rounded-xl shadow-md overflow-hidden p-4"},P={class:"bg-white rounded-xl overflow-hidden p-4 m-2"},H={class:"text-2xl font-bold text-gray-800 mb-4"},J=2097152,ae={__name:"ArtistsFormEdit",setup(R){const r=v(!1),m={image:["jpg","gif","png","jpeg","svg","webp"]};function u(e,i){return e&&m[i].indexOf(e.split(".").pop())>-1}const l=b().params.id,s=x({name:null,designation:"",description:null});let f=q({name:n().required(),designation:n().required(),description:n().nullable(),image:M().nullable().when("existingImage",{is:e=>!e,then:e=>e.required("Image is required")}).test("is-valid-type","Not a valid image type",e=>!e||typeof e=="string"?!0:u(e.name.toLowerCase(),"image")).test("is-valid-size","Max allowed size is 100KB",e=>!e||typeof e=="string"?!0:e.size<=J)});async function p(){const e=await z(l);if(!e||Object.keys(e).length===0){o.error("Artist not found!"),c.push({name:"admin-artists"});return}s.name=e.name,s.designation=e.designation,s.description=e.description,s.image=e.image,_({values:{...s}})}const{validate:g,values:d,resetForm:_}=k({validationSchema:f}),h=async()=>{r.value=!0;const{valid:e}=await g();if(e){const i=await j(d.image),w={...d,image:i};await V(l,w)?(o.success("Artist added successfully!"),c.push({name:"artists"})):o.error("Something went wrong while adding an artist!")}else o.error("Please Fill form Properly!");r.value=!1};return y(()=>{p()}),(e,i)=>(I(),A("div",null,[a($),t("div",C,[a(E),t("div",D,[t("main",null,[t("div",K,[t("div",N,[t("div",O,[t("div",P,[t("h2",H,"Edit Artist "+S(s.name)+" ! ",1)]),t("form",{class:"w-full mx-auto bg-white p-8 rounded-md",onSubmit:F(h,["prevent"])},[a(B,{isLoading:r.value},null,8,["isLoading"])],32)])])])]),a(L)])])]))}};export{ae as default};
