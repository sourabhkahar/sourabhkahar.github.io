import{r as v,D as x,E as y,o as b,c as A,a,e as t,t as S,B as E,m as o,p as c,k as F}from"./index-B1SWeNZu.js";import{_ as I,a as $,b as L}from"./Footer-Bf7pOiKO.js";import{_ as B,u as j}from"./fileupload-DBMS5Vd_.js";import{c as k,b as q,a as n,u as M}from"./index.esm-DjURDs9A.js";import{f as z,u as D}from"./artists-BlKJWPW6.js";import"./index-D42EpKAL.js";import"./relativeTime-BEV6EcOH.js";import"./auth-DuC4k0Xm.js";import"./config-aeT5C0xW.js";const V={class:"flex overflow-hidden bg-white pt-16"},N={id:"main-content",class:"h-full w-full bg-gray-50 relative overflow-y-auto lg:ml-64"},O={class:"w-full flex items-center justify-center p-2"},P={class:"container max-w-6xl"},C={class:"bg-white rounded-xl shadow-md overflow-hidden p-4"},K={class:"bg-white rounded-xl overflow-hidden p-4 m-2"},R={class:"text-2xl font-bold text-gray-800 mb-4"},T=2097152,ie={__name:"ArtistsFormEdit",setup(X){const r=v(!1),m={image:["jpg","gif","png","jpeg","svg","webp"]};function u(e,i){return e&&m[i].indexOf(e.split(".").pop())>-1}const l=x().params.id,s=y({name:null,designation:"",description:null});let p=k({name:n().required(),designation:n().required(),description:n().nullable(),image:q().nullable().when("existingImage",{is:e=>!e,then:e=>e.required("Image is required")}).test("is-valid-type","Not a valid image type",e=>!e||typeof e=="string"?!0:u(e.name.toLowerCase(),"image")).test("is-valid-size","Max allowed size is 100KB",e=>!e||typeof e=="string"?!0:e.size<=T)});async function f(){const e=await z(l);if(!e||Object.keys(e).length===0){o.error("Artist not found!"),c.push({name:"admin-artists"});return}s.name=e.name,s.designation=e.designation,s.description=e.description,s.image=e.image,_({values:{...s}})}const{validate:g,values:d,resetForm:_}=M({validationSchema:p}),h=async()=>{r.value=!0;const{valid:e}=await g();if(e){const i=await j(d.image),w={...d,image:i};await D(l,w)?(o.success("Artist added successfully!"),c.push({name:"artists"})):o.error("Something went wrong while adding an artist!")}else o.error("Please Fill form Properly!");r.value=!1};return b(()=>{f()}),(e,i)=>(F(),A("div",null,[a(I),t("div",V,[a($),t("div",N,[t("main",null,[t("div",O,[t("div",P,[t("div",C,[t("div",K,[t("h2",R,"Edit Artist "+S(s.name)+" ! ",1)]),t("form",{class:"w-full mx-auto bg-white p-8 rounded-md",onSubmit:E(h,["prevent"])},[a(B,{isLoading:r.value},null,8,["isLoading"])],32)])])])]),a(L)])])]))}};export{ie as default};
