import{r as v,K as b,L as x,h as y,c as A,f as a,b as t,t as I,I as S,C as o,D as c,o as F}from"./index-BZ1DEAC1.js";import{_ as L,a as $,b as E}from"./Footer-B7Y7ewrc.js";import{_ as j,u as q}from"./fileupload-BNnODvha.js";import{c as B,b as M,a as n,u as k}from"./index.esm-C9VMzT3Q.js";import{f as z,u as D}from"./artists-Dik_fZor.js";import"./index-CJQ5nkxc.js";import"./default-avatar-icon-DEm47801.js";import"./auth-fI0Vzqba.js";import"./relativeTime-C2-XkSdk.js";import"./config-aeT5C0xW.js";const V={class:"flex overflow-hidden bg-white pt-16"},C={id:"main-content",class:"h-full w-full bg-gray-50 relative overflow-y-auto lg:ml-64"},K={class:"w-full flex items-center justify-center p-2"},N={class:"container max-w-6xl"},O={class:"bg-white rounded-xl shadow-md overflow-hidden p-4"},P={class:"bg-white rounded-xl overflow-hidden p-4 m-2"},R={class:"text-2xl font-bold text-gray-800 mb-4"},T=2097152,ae={__name:"ArtistsFormEdit",setup(X){const r=v(!1),m={image:["jpg","gif","png","jpeg","svg","webp"]};function u(e,i){return e&&m[i].indexOf(e.split(".").pop())>-1}const l=b().params.id,s=x({name:null,designation:"",description:null});let f=B({name:n().required(),designation:n().required(),description:n().nullable(),image:M().nullable().when("existingImage",{is:e=>!e,then:e=>e.required("Image is required")}).test("is-valid-type","Not a valid image type",e=>!e||typeof e=="string"?!0:u(e.name.toLowerCase(),"image")).test("is-valid-size","Max allowed size is 100KB",e=>!e||typeof e=="string"?!0:e.size<=T)});async function p(){const e=await z(l);if(!e||Object.keys(e).length===0){o.error("Artist not found!"),c.push({name:"admin-artists"});return}s.name=e.name,s.designation=e.designation,s.description=e.description,s.image=e.image,_({values:{...s}})}const{validate:g,values:d,resetForm:_}=k({validationSchema:f}),h=async()=>{r.value=!0;const{valid:e}=await g();if(e){const i=await q(d.image),w={...d,image:i};await D(l,w)?(o.success("Artist added successfully!"),c.push({name:"artists"})):o.error("Something went wrong while adding an artist!")}else o.error("Please Fill form Properly!");r.value=!1};return y(()=>{p()}),(e,i)=>(F(),A("div",null,[a(L),t("div",V,[a($),t("div",C,[t("main",null,[t("div",K,[t("div",N,[t("div",O,[t("div",P,[t("h2",R,"Edit Artist "+I(s.name)+" ! ",1)]),t("form",{class:"w-full mx-auto bg-white p-8 rounded-md",onSubmit:S(h,["prevent"])},[a(j,{isLoading:r.value},null,8,["isLoading"])],32)])])])]),a(E)])])]))}};export{ae as default};
